## 3比特币介绍

### 3.1基本信息

| BTC相关概念 | 注释                                                         |
| ----------- | ------------------------------------------------------------ |
| 作者        | 中本聪（神秘人士）                                           |
| 比特币系统  | 一个软件，每个人都可以下载、运行，大家共同维护一个账本       |
| 发布时间    | 2009年1月三日                                                |
| 比特币      | 比特币系统维护账本上的交易数字                               |
| 区块链      | 一个数字账本，记录各种交易数据，是伴随比特币在系统中流通而产生的的概念。 |

**比特币诞生之初没有区块链概念：**

<font color='red'>bitcoin(BTC)</font>

<font color='red'>Bitcoin(区块链)</font>

### 3.2传统记账方式

**与传统记账方式的对比**

问：区块是什么？

答：记录多条交易的一页账单



问：区块链是什么？

答：按照时间顺序将多个账单装订在一起形成的账本

| 记账方式   | 交易记录存储 | 记录集合 |
| ---------- | ------------ | -------- |
| 传统记账   | 账单         | 账本     |
| 比特币记账 | 区块         | 区块链   |

传统记账方式：

**一页账单**  ————`账单按照先后顺序装订在一起`———> **账本**

### 3.3比特币和区块链关系

- 比特币是区块链的技术的应用
- 区块链是协议（bitcoin,Bitcion）
- 区块链是比特币的底层支撑系统
- 区块链是比特币抽离出来的概念

### 3.4比特币交易简单介绍

1. 新交易创建

   A -B

2. 交易通过网络广播

3. 交易验证

4. 验证结果通过网络广播

5. 交易写入账本

### 3.5比特币使用基本技术

**比特币（区块链）使用基本技术**

#### 哈希算法

**哈希算法（用于工作量证明）**

- 作用

  将任意长度的输入格式化为长度16进制字符串

- 主流算法

  md5(Message-dIGEST5) 32 * 4 ,SHA256(比特币) 64 * 4，sha1 , sha254 等

  md5 用于计算一个文件有没有被篡改。md5的特性是一个软件就算被修改很小的一点，生成出来的md5值都不一样（完全不一样，没有规律）。

  

- 性质

  - 抗碰撞性

    当知道x，无法求出一个y , 使x与y的HASH 值相同时。

    **不会冲突**

    `2^256`约等于`10^7`（宇宙中原子数在`10^78`到`10^82`之间），若想找到sha256算法的碰撞对，平均需要`2^128`次碰撞，1万次/s算力，大约需要`10^27`次方年。

    （不同内容 hash值一定不同，保证hash值的唯一性，无法被暴力穷举破解）

  - 原像不可逆：

    根据x的hash值，无法求出x（无法反推）

  - 谜题友好：

    没有快捷的方法去产生一满足特殊要求的hash值，这是pow共识机制的基础。

    如果我想去算出复合的值，智能一点一点算，一点一点运算。

    智能暴力去算。没有捷径。

  <font color='red'>注：第一条性质计算上成立，数学是不成立的。</font>

  清华大学密码学专家：王小云算出一个 hash   md5(a) = md5(b)

  运算目标不同结果相同。耗时长，现阶段md5是安全的。

#### 密码学

**密码学（用于资产所有权和交易验证）**

- 对称加密

  - 介绍

    采用单钥密码系统的加密方法，同一个秘钥可以同时作用信息的加密和解密，这种加密方法称为对称加密，也称为但秘钥加密。

    算法在迭代，思想早就有了。

  - 算法

    DES、3DES、AES、TDEA、Blowfish、RC2、RC4、RC5、IDEA、SKIPJACK

  - 特点

    - 加解密使用相同秘钥
    - 高效，适用于大量数据的加密场景。
    - 算法公开，安全性取决于秘钥大小，但秘钥越大效率越低，需要权衡在安全和效率中做权衡。

- 非对称加密（生成公钥和私钥）

- 张卫宁和张小宁同时持有 公钥和私钥。

  - 公钥

    加密，保护隐私。

    特性：自己的公钥智能解开自己私钥设置的文件。自己的私钥智能解开自己公钥设置的内容。

    张卫宁想给张小宁发送一个文件，就是用张小宁传过来的公钥进行加密。当张小宁拿到张卫宁用自己公钥进行加密的文件后就可以使用自己的私钥进行解密。

    如果有黑客使用特殊技术，拿到了张卫宁发送给张小宁的文件，使用任何公钥无法对其破解。

  - 私钥

    签名，一保护数据来源，二保证数据未篡改。
    
    场景实现：张卫宁想给张小宁发一段指令让他去完成这个事情。张小宁如何判断这个指令是不是张卫宁发的，这时候就用到了私钥的特性，张小宁可以拿到张卫宁的公钥，当张卫宁使用自己的私钥加密后发给张小宁之后呢，张小宁使用张卫宁的公钥去验证张卫宁发来的指令，验证成功就可以确定是张卫宁本人发送的。私钥加密的信息只是作为确定身份不具备隐私性，任何人拿到张卫宁的公钥都可以解开张卫宁私钥发出来的信息。
    
    张卫宁使用私钥进行加密的时候使用hash进行hash运算，生成hash值，张小宁拿到hash值之后使用相同的方法运算的出结果看看自己解开的hash和收到的hash是否相同，确定内容没有被篡改。
    
    - 算法
    
      RSA 、ECC、Elgamal、背包算法、D-H
    
      - RSA算法
    
        网易公开课，RSA介绍视频，参考链接：
    
        https://open.163.com/movie/2012/10/1/C/M99VIFJA6_M9EDSHM1C.html
    
      - 椭圆曲线算法（ECC）
    
        <font color='red'>比特币，巧妙避开美国NSA后门，v神们认为是巧合</font>
    
    - 特点
    
      - 安全性高
      - 加解密复杂，效率低
    
    - 应用
    
      - 数字证书（CA认证）
    
        http://www.blogjava.net/freeman1984/archive/2012/07/24/383817.html
    
      - 比特币地址
    
  - 总结
  
    - 对称加密，加密与解密使用的是同样的秘钥，所以速度快，单由于需要将秘钥传输在网络上，所以安全性不高。
    - 非对称加密使用一对秘钥，公钥与私钥，所以安全性高，单加密与解密速度慢。
    - 解决的办法是将对称加密的秘钥使用非对称机密的公钥进行加密协商，然后发送出去，接收方使用私钥进行解密得到对称加密的秘钥，然后双方可以

#### 编码

**编码（网络传输、生成地址）**

- base64编码

  - 介绍

    base64编码，使我们程序开发中经常使用到的编码方法。他是一种基于用64个可打印字符来表示二进制数据的表示方法。他通常用于存储、传输一些二进制数据编码方法。

  - 原理

    base64编码要求吧3个巴卫字节（3*8=24）转化为4个6位的字节（4*6=24），之后再6位的前面补充两个0，形成八位一个字节的形式。如果省下的字符不足3个字节，则用0填充，输出字符使用“=”，因此编码后输出的文本末尾可能会出现1或2个“=”。

    为了保证所输出的编码位可读字符，base64制定了一个编码表，以便进行统一转换。编码表的大小为`2^6=64`，这也是base64的名称由来。

    base64编码表：

    | 编号 | 字符 |      | 编号 | 字符 |      | 编号 | 字符 |      | 编号 | 字符 |
    | ---- | ---- | ---- | ---- | ---- | ---- | ---- | ---- | ---- | ---- | ---- |
    | 0    | A    |      | 16   | Q    |      | 32   | g    |      | 48   | w    |
    | 1    | B    |      | 17   | R    |      | 33   | h    |      | 49   | x    |
    | 2    | C    |      | 18   | S    |      | 34   | i    |      | 50   | y    |
    | 3    | D    |      | 19   | T    |      | 35   | j    |      | 51   | z    |
    | 4    | E    |      | 20   | U    |      | 36   | j    |      | 52   | 0    |
    | 5    | F    |      | 21   | V    |      | 37   | i    |      | 53   | 1    |
    | 6    | G    |      | 22   | W    |      | 38   | m    |      | 54   | 2    |
    | 7    | H    |      | 23   | X    |      | 39   | n    |      | 55   | 3    |
    | 8    | I    |      | 24   | Y    |      | 40   | o    |      | 56   | 4    |
    | 9    | J    |      | 25   | Z    |      | 41   | p    |      | 57   | 5    |
    | 10   | K    |      | 26   | a    |      | 42   | q    |      | 58   | 6    |
    | 11   | M    |      | 27   | b    |      | 43   | r    |      | 59   | 7    |
    | 12   | N    |      | 28   | c    |      | 44   | s    |      | 60   | 8    |
    | 13   | O    |      | 29   | d    |      | 45   | t    |      | 61   | 9    |
    | 14   | O    |      | 30   | e    |      | 46   | u    |      | 62   | +    |
    | 15   | P    |      | 31   | f    |      | 47   | v    |      | 63   | /    |

    参考链接：

    https://blog.csdn.net/aozeahj/article/details/52507352

  - 特点

    - base64就是一种基于64个可打印字符来表示二进制数据的方法。

    - Z（26）、a-z（26）、0-9（10）、+/ （2）：共计64个字符。
    - 编码后便于传输，尤其是不可见字符或特殊字符，对端接收后解码即可复原。
    - <font color='red'>base64只是编码，并不具备加密作用。</font>

- base68

  在base64字符中去掉6种容易混淆的字符。

  - 0：number zero
  - 0：capital o
  - l：lower L       小写的L
  - I：capital i       大写的 i 

#### P2P网络

**P2P网络（用于 广播交易，同步账本）**

- 介绍

  点对点技术，无中心服务器，依靠用户交换信息的互联网体系网络的参与者共享他们所拥有的的一部分硬件资源（处理能力、存储能力、网络连接能力、打印机等），这些共享资源通过网络提供服务和内容，能被其他对等节点（Peer）直接访问二无需经过中间实体。再此网络中的参与者既是资源、服务和内容的提供者（Sserver），又是资源、服务和内容的获取者（Client）,P2P体系结构是应用层概念

- 特点

  耐攻击、高容错、地位平衡

- 应用

  BT下载、电驴下载

- P2P技术在比特币中应用于消息广播、账本同步、交易。

#### 梅克尔树

**梅克尔树（用于快速验证交易）**

- 介绍

  Merkle Tree , 通常也被成为Hash Tree 顾名思议，就是存储hash值的的一颗树。Merkle树的叶子是数据库的hash值。

- 特点

  二叉树

- 应用

  可以快速减速，尤其是在数据量猛增时，搜索效率高（在比特币中用来快速搜索校验某一笔交易是否存在于某个block中）

#### 工作量证明

**工作量证明（Proof Of Work）**

- 介绍

  POW是一种对应用服务于资源滥用、或是阻断服务供给的经济对策。一般是要求用户进行一些耗时适当的复杂运算，并且答案能被服务方快速验证，以此耗用的时间、设备与能源作为担保成本，以确保服务于资源是被真正的需求所使用。目前该技术成为了加密货币的主流共识机制之一，比如比特币采用的挖矿技术。

- 特点

  BTC的POW要求运算一个哈希算法（sha265），找到一个符合要求的Block Hash ， 该哈希值由N个前导零构成，零的个数取决于网络的难度值。要得到合理的Block Hash需要经过大量尝试计算，计算时间取决于机器的哈希运算速度。