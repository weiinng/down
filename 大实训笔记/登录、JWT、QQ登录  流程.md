# 登录、JWT、QQ登录  流程

登录
我的登陆模块写了第三方登录，因为大多数网站都有第三方登陆，并且第三方登录可以省许多时间，比较方便。
关于三方登录的授权机制
在授权过程中大致有三个对象。一个是服务提供方（第三方网站）、一个是用户（将资源放在服务提供方存放的对象）、还有一个就是客户端（向服务提供放请求用户资源的对象）。首先，客户端向服务提供方发起请求，请求服务提供方的一个临时令牌，这个临时令牌是进行下一步的基础，服务提供方先要验证一下客户端的身份，验证成功后会给客户端所要的临时令牌。接下来客户端会引导用户进行授权操作，用户进入服务提供方提供的页面，完成授权以后服务提供方会给客户端一个访问令牌并调转回客户端的网页。通过访问令牌，客户端就可以获得用户在服务提供方上的若干权限

用户登录
JWTtoken的相关了解
cookies的使用目的
1.http协议本生是一种无状态的协议，假如用户每次发送请求过来将用户名和密码在后端进行验证后才可以登录到某些界面才可以进行操作，当客户端再次请求服务器时，又要重新进行认证；
2.解决方法：在客户端设置cookie并在本地设置session存储用户的敏感信息，从而来记录当前用户登录的状态，如果用户量再次请求服务器，将cookie带给服务器，服务器查询session获取用户信息，进行下一步操作。
3.客户端比较多的情况下，seession中默认会存在内存，随着用户量的增加服务器的压力就会变大；
传统的cookies显示出来的问题
在现在的市场各种不同的浏览器，对同一个网站进行，用户的每种设备都需要维护相关的session在服务器端，会造成服务器资源的浪费，相关网站采取单点登录来记录用户的状态状态来解决以上传统cookies带来的问题
单点登录的概念
用户在不同的设备中进行登录，服务器端不用维护用户的相关信息，在每次登录的过程中都由客户端将自己的用户信息发送过来，服务端进行解析来获取用户的相关信息
token认证的机制
1.用户携带用户名和密码来后端进行验证 2.服务器端验证通过后对为当前用户生成token 3.将token返回给前端，记录用户的信息 4.用户再次请求服务器的时候，服务端解析token相关的信息，验证用户确定用户状态，进行 相关操作 
1
2
3
4
5
备注：
1.jwt的组成第一部分我们称它为头部（header),第二部分我们称其为载荷（payload, 类似于飞机上承载的物品)，第三部分是签证（signature).
2.secretkey是存储在服务器端的，如果secret key
用户登录JWT认证的的流程源代码（待继续理解）
qq登录
qq登录流程oauth2的认证流程分析
1.用户向美多网站发送qq注册的请求

 2.美多网站向用户返回qq登录的页面 

3.用户在qq登录的界面向qq的服务器发送qq用户名和密码发起登录的请求

 4.qq服务器认证成功之后将用户引导到回调的网址中，并返回给用户qq服务器的token值

 5.用户重定向到美多页面并携带了qq服务器发送的token 

6.后端接收到token后向qq服务器请求access token

 7.qq服务器返回access token 

8.美多服务器通过access token来向qq服务器来获取用户的openid 

9.通过id来查询用户是否已经在美多商城注册 

10.用户已经注册直接返回用户的access token值 

11.用户没有账号，生成注册的access token，（载荷openid）重新注册信息发送给后端 

12.后端接收到数据之后创建对象并将qq用户的openid和账号进行绑定